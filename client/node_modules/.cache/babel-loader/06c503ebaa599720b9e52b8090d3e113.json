{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createSensor = void 0;\n\nvar _debounce = _interopRequireDefault(require(\"../debounce\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n/**\n * Created by hustcc on 18/7/5.\n * Contract: i@hust.cc\n */\n\n\nvar createSensor = function createSensor(element) {\n  var sensor = undefined; // callback\n\n  var listeners = [];\n  /**\n   * trigger listeners\n   */\n\n  var resizeListener = (0, _debounce[\"default\"])(function () {\n    // trigger all\n    listeners.forEach(function (listener) {\n      listener(element);\n    });\n  });\n  /**\n   * create ResizeObserver sensor\n   * @returns\n   */\n\n  var newSensor = function newSensor() {\n    var s = new ResizeObserver(resizeListener); // listen element\n\n    s.observe(element); // trigger once\n\n    resizeListener();\n    return s;\n  };\n  /**\n   * listen with callback\n   * @param cb\n   */\n\n\n  var bind = function bind(cb) {\n    if (!sensor) {\n      sensor = newSensor();\n    }\n\n    if (listeners.indexOf(cb) === -1) {\n      listeners.push(cb);\n    }\n  };\n  /**\n   * destroy\n   */\n\n\n  var destroy = function destroy() {\n    sensor.disconnect();\n    listeners = [];\n    sensor = undefined;\n  };\n  /**\n   * cancel bind\n   * @param cb\n   */\n\n\n  var unbind = function unbind(cb) {\n    var idx = listeners.indexOf(cb);\n\n    if (idx !== -1) {\n      listeners.splice(idx, 1);\n    } // no listener, and sensor is exist\n    // then destroy the sensor\n\n\n    if (listeners.length === 0 && sensor) {\n      destroy();\n    }\n  };\n\n  return {\n    element: element,\n    bind: bind,\n    destroy: destroy,\n    unbind: unbind\n  };\n};\n\nexports.createSensor = createSensor;","map":{"version":3,"sources":["/Users/clairevandenberg/Desktop/coding_boot_camp/Projects/ProjectThree/projectthree/client/node_modules/size-sensor/lib/sensors/resizeObserver.js"],"names":["Object","defineProperty","exports","value","createSensor","_debounce","_interopRequireDefault","require","obj","__esModule","element","sensor","undefined","listeners","resizeListener","forEach","listener","newSensor","s","ResizeObserver","observe","bind","cb","indexOf","push","destroy","disconnect","unbind","idx","splice","length"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAACE,YAAR,GAAuB,KAAK,CAA5B;;AAEA,IAAIC,SAAS,GAAGC,sBAAsB,CAACC,OAAO,CAAC,aAAD,CAAR,CAAtC;;AAEA,SAASD,sBAAT,CAAgCE,GAAhC,EAAqC;AAAE,SAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;AAAE,eAAWA;AAAb,GAArC;AAA0D;AAEjG;;;;;;AAIA,IAAIJ,YAAY,GAAG,SAASA,YAAT,CAAsBM,OAAtB,EAA+B;AAChD,MAAIC,MAAM,GAAGC,SAAb,CADgD,CACxB;;AAExB,MAAIC,SAAS,GAAG,EAAhB;AACA;;;;AAIA,MAAIC,cAAc,GAAG,CAAC,GAAGT,SAAS,CAAC,SAAD,CAAb,EAA0B,YAAY;AACzD;AACAQ,IAAAA,SAAS,CAACE,OAAV,CAAkB,UAAUC,QAAV,EAAoB;AACpCA,MAAAA,QAAQ,CAACN,OAAD,CAAR;AACD,KAFD;AAGD,GALoB,CAArB;AAMA;;;;;AAKA,MAAIO,SAAS,GAAG,SAASA,SAAT,GAAqB;AACnC,QAAIC,CAAC,GAAG,IAAIC,cAAJ,CAAmBL,cAAnB,CAAR,CADmC,CACS;;AAE5CI,IAAAA,CAAC,CAACE,OAAF,CAAUV,OAAV,EAHmC,CAGf;;AAEpBI,IAAAA,cAAc;AACd,WAAOI,CAAP;AACD,GAPD;AAQA;;;;;;AAMA,MAAIG,IAAI,GAAG,SAASA,IAAT,CAAcC,EAAd,EAAkB;AAC3B,QAAI,CAACX,MAAL,EAAa;AACXA,MAAAA,MAAM,GAAGM,SAAS,EAAlB;AACD;;AAED,QAAIJ,SAAS,CAACU,OAAV,CAAkBD,EAAlB,MAA0B,CAAC,CAA/B,EAAkC;AAChCT,MAAAA,SAAS,CAACW,IAAV,CAAeF,EAAf;AACD;AACF,GARD;AASA;;;;;AAKA,MAAIG,OAAO,GAAG,SAASA,OAAT,GAAmB;AAC/Bd,IAAAA,MAAM,CAACe,UAAP;AACAb,IAAAA,SAAS,GAAG,EAAZ;AACAF,IAAAA,MAAM,GAAGC,SAAT;AACD,GAJD;AAKA;;;;;;AAMA,MAAIe,MAAM,GAAG,SAASA,MAAT,CAAgBL,EAAhB,EAAoB;AAC/B,QAAIM,GAAG,GAAGf,SAAS,CAACU,OAAV,CAAkBD,EAAlB,CAAV;;AAEA,QAAIM,GAAG,KAAK,CAAC,CAAb,EAAgB;AACdf,MAAAA,SAAS,CAACgB,MAAV,CAAiBD,GAAjB,EAAsB,CAAtB;AACD,KAL8B,CAK7B;AACF;;;AAGA,QAAIf,SAAS,CAACiB,MAAV,KAAqB,CAArB,IAA0BnB,MAA9B,EAAsC;AACpCc,MAAAA,OAAO;AACR;AACF,GAZD;;AAcA,SAAO;AACLf,IAAAA,OAAO,EAAEA,OADJ;AAELW,IAAAA,IAAI,EAAEA,IAFD;AAGLI,IAAAA,OAAO,EAAEA,OAHJ;AAILE,IAAAA,MAAM,EAAEA;AAJH,GAAP;AAMD,CA9ED;;AAgFAzB,OAAO,CAACE,YAAR,GAAuBA,YAAvB","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createSensor = void 0;\n\nvar _debounce = _interopRequireDefault(require(\"../debounce\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n/**\n * Created by hustcc on 18/7/5.\n * Contract: i@hust.cc\n */\nvar createSensor = function createSensor(element) {\n  var sensor = undefined; // callback\n\n  var listeners = [];\n  /**\n   * trigger listeners\n   */\n\n  var resizeListener = (0, _debounce[\"default\"])(function () {\n    // trigger all\n    listeners.forEach(function (listener) {\n      listener(element);\n    });\n  });\n  /**\n   * create ResizeObserver sensor\n   * @returns\n   */\n\n  var newSensor = function newSensor() {\n    var s = new ResizeObserver(resizeListener); // listen element\n\n    s.observe(element); // trigger once\n\n    resizeListener();\n    return s;\n  };\n  /**\n   * listen with callback\n   * @param cb\n   */\n\n\n  var bind = function bind(cb) {\n    if (!sensor) {\n      sensor = newSensor();\n    }\n\n    if (listeners.indexOf(cb) === -1) {\n      listeners.push(cb);\n    }\n  };\n  /**\n   * destroy\n   */\n\n\n  var destroy = function destroy() {\n    sensor.disconnect();\n    listeners = [];\n    sensor = undefined;\n  };\n  /**\n   * cancel bind\n   * @param cb\n   */\n\n\n  var unbind = function unbind(cb) {\n    var idx = listeners.indexOf(cb);\n\n    if (idx !== -1) {\n      listeners.splice(idx, 1);\n    } // no listener, and sensor is exist\n    // then destroy the sensor\n\n\n    if (listeners.length === 0 && sensor) {\n      destroy();\n    }\n  };\n\n  return {\n    element: element,\n    bind: bind,\n    destroy: destroy,\n    unbind: unbind\n  };\n};\n\nexports.createSensor = createSensor;"]},"metadata":{},"sourceType":"script"}